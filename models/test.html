<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            width: 10px;
            height: 10px;

        }
    </style>
</head>

<body>

    <script type="module">
        import { Storage } from "../utils/localStorageHelper.js";
        import { User } from "../models/User.js";
        import { Customer } from "../models/Customer.js";
        import { Seller } from "../models/Seller.js";
        import { Admin } from "../models/Admin.js";
        import { Product } from "../models/Product.js";
        import { Auth } from "../utils/auth.js"

        function encodeUnicode(str) {
            return btoa(unescape(encodeURIComponent(str)));
        }

        function decodeUnicode(base64) {
            return decodeURIComponent(escape(atob(base64)));
        }

        window.addEventListener("load", () => {
            //Test Sign Up

            // Simiulate Data Gathered From Registeration Form
            // Customer
            // const formData = {
            //     name: "Abdullah",
            //     email: "Abdullah@test.com",
            //     password: "Aa1234",
            //     role: "Customer",
            //     gender: "Male",
            //     address: "Kafr El-Zayat",
            //     phone: "01555853925",
            // }

            //Seller
            // const formData = {
            //     name: "Mekkawi",
            //     email: "Mekkawi@test.com",
            //     password: "Aa1234",
            //     role: "Seller",
            //     brandName: "Defacto",
            //     address: "Kafr El-Zayat",
            //     phone: "01555853925",
            //     targetAudience:"both"
            // }

            //Admin (Created By Developer or Admin Only)
            // const formData = {
            //     name: "Haidy",
            //     email: "Haidy@test.com",
            //     password: "Aa1234",
            //     role: "Admin",
            //     phone: "01555853925",
            //     adminLevel: 3
            // }


            // product data
            // const productData={
            //     name: "Skirt",
            //     description: "A Cute Skirt",
            //     price: 350,
            //     image: "/images/anyImage.jpg",
            //     category: "Women",
            //     subcategory: "Skirt",
            //     availableColors: ["Red", "Black", "Blue"],
            //     availableSizes: ["XL", "M"],
            //     stock: [{ size: "XL", color: "Red", quantity: 5 }, { size: "L", color: "Black", quantity: 5 }],
            //     tags: ["Best Seller"],
            //     salePrice: 175
            // }

            const allUsers = Storage.get("users");
            const customer = allUsers.find(user => user.email === "Abdullah@test.com")
            const brand = allUsers.find(user => user.email === "Mekkawi@test.com")
            const admin = allUsers.find(user => user.email === "Haidy@test.com")




            // Auth.login("Haidy@test.com", "Aa1234")
            // const currentUser = Storage.get("loggedInUser");
            if (brand instanceof Seller) {
                // const rs=currentUser.products[0].show();
                // alert(rs.message)
                // if(rs.success){
                //     User.updateCurrentUser(currentUser);
                // }
                // let rs = brand.hideProduct(brand.products[0].id)
                // alert(rs.message)
            }

            if (admin instanceof Admin) {
                // let rs = admin.verifyProduct(brand.id,brand.products[0].id)
                // alert(rs.message)
            }

            if (customer instanceof Customer) {




            }
















            // const res = Auth.login("mekkawi@exmaple.com", "1234")
            // const currentUser = Storage.get("loggedInUser");
            // console.log(res)
            //console.log(currentUser)
            // if (res) {
            //     alert(res.message)
            // } else {
            //     alert(res.message)
            // }




            //console.log(currentUser)
            //console.log(currentUser instanceof Seller)


            // // Seller Behaviour
            // if (currentUser instanceof Seller) {
            //     //alert("ana Rahma")
            //     //console.log(currentUser.products[0] instanceof Product)

            // }
            // // Customer Behaviour
            // else if (currentUser instanceof Customer) {
            //     //console.log("ana customer")

            //     // currentUser.addToWishlist()
            //     //currentUser.cart = [product1, product2]
            //     let order = [{ product: Skirt, quantity: 2, size: "XL", color: "Red", buyer: currentUser.id }
            //         , { product: Skirt, quantity: 3, size: "L", color: "Black", buyer: currentUser.id }
            //     ]



            //     //currentUser.addToWishlist(Skirt);

            //     // User.updateInDB(currentUser);

            //     // let result = currentUser.checkout(order)
            //     // if (result.success) {
            //     //     //User.updateCurrentUser(currentUser)
            //     //     console.log(result.message)
            //     // } else {
            //     //     alert(result.message)
            //     // }
            // }
            // // Admin Behaviour
            // else if (currentUser instanceof Admin) {
            // }

            const validColors = [
                "black", "white", "gray", "silver", "red", "maroon", "crimson", "salmon",
                "orange", "coral", "yellow", "gold", "green", "lime",
                "blue", "navy", "skyblue", "azure", "royalblue", "teal", "turquoise", "aqua",
                "purple", "violet", "lavender", "indigo", "plum", "magenta", "fuchsia",
                "pink", "hotpink", "brown", "chocolate", "tan", "beige"];

            for (let i = 0; i < validColors.length; i++) {
                const element = document.createElement("div");
                element.style.borderRadius = "50%"
                element.style.backgroundColor = validColors[i]
                document.body.appendChild(element)
            }


            //console.log(currentUser)

        })

    </script>
</body>

</html>